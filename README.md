# slam_validation

   Данный проект предназначен для оценки метрик SLAM, построенный на основе пакета "evo" (https://github.com/MichaelGrupp/evo) и питоновского кода оценки метрик китти (https://github.com/Huangying-Zhan/kitti-odom-eval)

## Запуск

   Запускать нужно скрипт "evaluate_poses_kitti.py".
   
   Скрипт принимает в качестве аргументов: 
   * папку с gt позами (--dir_gt), 
   * папку с предсказанными позами (--dir_result),
   * папку, в которую нужно положить результаты валидации (--dir_output). Выходную папку для результатов валидации необязательно создавать, скрипт сам создаст, если папки нет. Если папка для результатов валидации уже существует, то ошибки не возникнет.
   * проекция, на которой нужно отобразить траектории. Аргумент --projection. Возможные варианты: 'xy' ('yx'), либо 'xz' ('zx'), либо 'yz' ('zy')
   * формат поз, полученные методом SLAM. Аргумент --result_format. Возможные варианты: "kitti", "tum", "euroc". По умолчанию стоит "kitti".
   * формат поз GT. Аргумент --gt_format. Возможные варианты: "kitti", "tum", "euroc". По умолчанию стоит "kitti"
   * максимальное расхождение между временами поз gt и result. Аргумент --max_diff. Обычно он устанавливается исходя из расчета 1/(2*FPS). По умолчанию - 0.05 с.
   
   Пример запуска скрипта:
   
   ```bash
   (python37) cds-s@cds-s:~/git-repos/slam_validation$ $ python evaluate_poses_kitti.py \
   --dir_gt /media/cds-s/data2/Datasets/Husky-NKBVS/gt_poses_camera\(with_cam_lidar_timestamps\) \
   --dir_result /media/cds-s/data2/Datasets/Husky-NKBVS/OpenVSLAM_results \
   --dir_output /media/cds-s/data2/Datasets/Husky-NKBVS/result_evaluation \
   --projection 'xz' \
   --result_format tum \
   --gt_format tum 
   ```

   В качестве одного из результатов выполнения скрипта в выходной папке появится файл results.xlsx. В данном файле Excel результаты расположены горизонтально таким образом, чтобы можно было просто скопировать результаты и вставить в другой файл типа Excel, где результаты должны также располагаться.
   
   При копировании результатов из файла Excel нужно убедиться, что наименования треков следуют в том же порядке, как и в файле Excel, куда будут копироваться результаты. Данный скрипт сортирует имена файлов с позами, и использует эти имена в сортированном порядке в файле Excel.
